<HTML>
	<HEAD>
		<TITLE>
			DirectXのプロジェクト設定方法
		</TITLE>
	</HEAD>
	<BODY bgcolor="#b8d4ef" topmargin="50" leftmargin="50" marginheight="40" marginwidth="40">
		<div align="center"><font size="7">DirectXのプロジェクト設定方法</font></div>
	
		<h2>
			対象
			<hr color="#99baff">
		</h2>
		<p>
			&emsp;C言語を学び終えてC++も学び終えてかつゲームを作成してなおゲーム会社へ行きたい人もしくは技術の高い向上を<br>
			望んでいる人が対象となります。<br>
			Visual Studio 2015または2017を使用しての説明となります。<br>
			<br><br><br><br><br>
		</p>

		<h2>
			目的
			<hr color="#99baff">
		</h2>
		<p>
			&emsp;上を目指す人を対象としたDirectXの設定方法を説明します。<br>
			<br><br><br><br><br>
		</p>

		<h2>
			構成
			<hr color="#99baff">
		</h2>
		<p>
			<ol>
				<a href="#R1">No.1 DX9を扱うためのDirectX SDKのダウンロード<br></a>
				<a href="#R2">No.2 DX10以降を扱うためのWindows Kitのダウンロード<br></a>
				<a href="#R3">No.3 プロジェクトの設定<br></a>
			</ol><br>
			<br><br><br><br><br>
		</p>

		<h2>
			本編
			<hr color="#99baff">
		</h2>
		<p>
			&emsp;今回はDirectXを扱うための導入について説明します。ちなみに画像を多く使って説明します。<br>
			<br><br><br><br><br>
		</p>

		<h3>
			<a name="R1">
				No.1 DX9を扱うためのDirectX SDKのダウンロード
			</a>
			<hr color="#99baff">
		</h3>
		<p>
			&emsp;以下のURLから<font color="red">DirectX SDK</font>をダウンロードしてください。<br>
			<br>
			&emsp;<a href="https://www.microsoft.com/en-us/download/details.aspx?id=6812">Download DirectX Software Development Kit from Official Microsoft Download Center</a><br>
			<br>
			&emsp;というサイトへ移動してください。以下のようなサイトへ移ると思います。<br>
			違うようなサイトもしくはサイトがなかった場合は「DirectX SDK ダウンロード」と検索してダウンロードしてください。<br>
			<img src="1.jpg" alt="Download DirectX Software Development Kit from Official Microsoft Download Center"><br>
			<br>
			&emsp;そのサイトにある「Download」を押して始めてください。以下は画像で説明します。<br>
			<br>
			<img src="2.jpg" alt="Download"><br>
			<br>
			<img src="3.jpg" alt="exeをダウンロード"><br>
			<br>
			<img src="4.jpg" alt="exeを起動"><br>
			<br>
			<img src="5.jpg" alt="SDKのダウンロード最初"><br>
			<br>
			<img src="6.jpg" alt="使用許諾契約"><br>
			<br>
			<img src="7.jpg" alt="ヘルプを入れるか入れないか"><br>
			<br>
			<img src="8.jpg" alt="インストールフォルダ"><br>
			<br><br><br>
			&emsp;ダウンロード済みなのでここからは端折りますが次へなどあればそのまま進んでください。<br>
			ダウンロードが終わりますと以下のディレクトリに<font color="red">Microsoft DirectX SDK(June 2010)</font>があるはずなので確認してください。<br>
			<br><br>
			<img src="9.jpg" alt="SDKフォルダの確認"><br>
			<br>
			<br>
			&emsp;これでダウンロードは終了です。<br>
			<br><br><br><br><br>
		</p>

		<h3>
			<a name="R2">
				No.2 DX10以降を扱うためのWindows Kitのダウンロード
			</a>
			<hr color="#99baff">
		</h3>
		<p>
			&emsp;Widnows Kitのダウンロードの説明をしますが、パソコンによっては既に入ってる場合があるのでまず確認してください。<br>
			<br>
			<img src="19.jpg" alt="既存のWindows Kitの確認"><br>
			<br>
			&emsp;上の画像のような場所に移動してください。<br>
			<font color="red">C→Program Files(x86)→Windows Kit→10→Include→</font>へ移ってください。<br>
			<br>
			&emsp;人によって違うと思いますがその中にあるフォルダの名前を確認してください。<br>
			その中で一番バージョンが新しいものを覚えといてください。<br>
			画像の場合は<font color="red">「10.0.16299.0」</font>です。<br><br>
			&emsp;以下のURLから移動してください。<br>
			<br>
			&emsp;<a href="https://developer.microsoft.com/ja-jp/windows/downloads/windows-10-sdk">Windows 10 SDK - Windows アプリ開発</a><br>
			<br>
			&emsp;というサイトへ移動してください。以下のようなサイトへ移ると思います。<br>
			違うようなサイトもしくはサイトがなかった場合は「Widnows SDK」と検索してください。<br>
			<br>
			<img src="20.jpg" alt="Download"><br>
			<br>
			&emsp;画像の赤の部分の数字を見てください。<br>
			そしたら先ほどのディレクトリで覚えてくださいといった数字があると思いますがそれと比較してください。<br>
			それでサイトのほうが新しいバージョンだった場合は下をそのまま進めてください。<br>
			もし、サイトと同じ数字だった場合は<a href="#R3">No.3 プロジェクトの設定<br></a>へ飛んでください。<br>
			<br><br>
			サイトの方が新しいバージョンだった場合の説明を始めます。<br>
			<img src="16.jpg" alt="Windows 10 SDK - Windows アプリ開発"><br>
			<br>
			&emsp;そのサイトにある「.EXEをダウンロードする」を押して始めてください。以下は画像で説明します。<br>
			<br>
			<img src="17.jpg" alt="Download"><br>
			<br>
			<img src="18.jpg" alt="exeを起動"><br>
			<br><br><br>
			&emsp;ダウンロード済みなのでここからの細かい説明を出来ませんが次へなどあればそのまま言われた通り進んでください。<br>
			<br><br>
			ダウンロードが終わりましたら先ほどと同じディレクトリへ移って最新バージョンが入っていることを確認してください。それでダウンロードは終了です。<br>
			<br>
			<br>
			&emsp;これでダウンロードは終了です。<br>
			<br><br><br><br><br>
		</p>

		<h3>
			<a name="R3">
				No.3 プロジェクトの設定
			</a>
			<hr color="#99baff">
		</h3>
		<p>
			&emsp;以下のサイトで勉強してください。私も最初はこのページからDirectXを始めましたし最初としてはいいサイトだと思います。<br><br>
			&emsp;<a href="http://k3tec.net/neko_wiki/index.php?DirectX%B9%D6%BA%C20%B2%F3">DirectX講座0回 - K3 計算技術研究会</a><br><br>
			&emsp;ですがバージョンや環境の古さが相まって大変なことになると思いましたのでNo.1またNo.2としてダウンロードを設けました。<br>
			DxLib同様DirectXにもプロジェクトの設定がいりますのでそれだけでも説明しようと思います。<br>
			ですが、上のリンクのページでそれらを学ぶのはありです。<br>
			また、先に話しますとこのサイトではDirectX SDKの導入の説明しかしておらずWindows SDKの説明はしていません。なぜ、私は導入をさせたか。なぜ、このサイトでは一切触れていないか。
			疑問に感じると思いますので軽く説明しようと思いますが、とりあえずこのNo.3の目的を完遂したいので後で説明します。<br>
			<br><br>
			&emsp;まず、Visual Studioを起動して新しいプロジェクトを作成してmain.cppを表示したところまでやってください。
			お伝えしなおしますが今ページはC言語及びC++の最低限を学び終えDxLibでゲームを作成したことがある人が対象です。<br>
			<br>
			プロジェクトの設定なので画像で簡単に説明します。<br>
			<br><br>
			<img src="10.jpg" alt="x64へ変更"><br>
			<br>
			<img src="11.jpg" alt="プロパティの表示とバージョン確認"><br>
			<br>
			<img src="12.jpg" alt="VC++ディレクトリの設定前確認"><br>
			<br>
			<img src="13.jpg" alt="インクルードディレクトリのWindows Kitの設定"><br>
			<br>
			<img src="14.jpg" alt="インクルードディレクトリのDirectX SDKの設定"><br>
			<br>
			<img src="15.jpg" alt="インクルードディレクトリの設定後"><br>
			<br>
			<img src="21.jpg" alt="ライブラリディレクトリのWindows Kitのucrtの設定"><br>
			<br>
			<img src="22.jpg" alt="ライブラリディレクトリのWindows Kitのumの設定"><br>
			<br>
			<img src="23.jpg" alt="ライブラリディレクトリのDirectXSDKの設定"><br>
			<br>
			<img src="24.jpg" alt="ライブラリディレクトリの設定後"><br>
			<br><br>
			これで初期設定は終了です。<br>
			<br>
			&emsp;それで設定がうまくいってるのかを確認するために以下のコードをひとまずコピペでテストしてください。<br>
			今は特に勉強してない段階、ただの設定の段階なので中身は無視しますがこの設定を終えたら中身の意味を全部理解してもらいます。<br>
			<br><br><br><br>
		</p>
		<div style="background:#EFEFEF;width:1200px;border:1px solid #CC0000; height:2500px;">
		<pre>
	// Direct3Dに必要なヘッダーとライブラリ

	#define D3D_DEBUG_INFO	// Direct3Dデバックフラグ
			
	#pragma comment(lib, &quot;d3d9.lib&quot;)
	#pragma comment(lib, &quot;d3dx9.lib&quot;)
	#pragma comment(lib, &quot;d3dxof.lib&quot;)
	#pragma comment(lib, &quot;dxguid.lib&quot;)
	#pragma comment(lib, &quot;winmm.lib&quot;)
	#include &lt;comdef.h&gt;
	#include &lt;d3d9.h&gt;
	#include &lt;d3dx9.h&gt;
	#include &lt;mmsystem.h&gt;

	#include &lt;Windows.h&gt;
	#include &lt;tchar.h&gt;
			
	// ウィンドウプロシージャ、ウィンドウに対するメッセージ処理を行う
	LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam){
		
		switch(msg){
			// ウィンドウが破棄されたとき
			case WM_DESTROY:
				PostQuitMessage(0);	// WM_QUITメッセージをメッセージキューに送る
				return 0;
		}
		// デフォルトのメッセージ処理を行う
		return DefWindowProc(hWnd, msg, wParam, lParam);
	}
			
	// WinMain関数（アプリケーションの開始関数）
	// コンソールアプリケーションと違い、コンソールを開かない
	int _stdcall WinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR lpCmdLine,int nCmdShow)
	{
		const TCHAR* WC_BASIC = _T(&quot;BASIC_WINDOW&quot;);
		// シンプルウィンドウクラス設定
		WNDCLASSEX wcex ={sizeof(WNDCLASSEX), CS_HREDRAW | CS_VREDRAW | CS_DBLCLKS,WndProc, 0,0,hInstance,
			(HICON)LoadImage(NULL,MAKEINTRESOURCE(IDI_APPLICATION),IMAGE_ICON,0,0,LR_DEFAULTSIZE | LR_SHARED),
			(HCURSOR)LoadImage(NULL,MAKEINTRESOURCE(IDC_ARROW),IMAGE_CURSOR,0,0,LR_DEFAULTSIZE | LR_SHARED), 
			(HBRUSH)GetStockObject(WHITE_BRUSH), NULL, WC_BASIC , NULL};
			
		// シンプルウィンドウクラス作成
		if(!RegisterClassEx(&amp;wcex)) 
			return false;
			
		// ウィンドウ幅、高さはディスプレイに依存する。普通は4:3
		const int WINDOW_WIDTH = 640;
		const int WINDOW_HEIGHT = 480;
		// ウィンドウの作成
		HWND hWnd = CreateWindowEx(0,WC_BASIC,
			_T(&quot;Application&quot;), WS_OVERLAPPEDWINDOW | WS_CLIPCHILDREN | WS_VISIBLE,
			CW_USEDEFAULT,CW_USEDEFAULT,WINDOW_WIDTH,WINDOW_HEIGHT,NULL,NULL,hInstance,NULL);
			
		//      Direct3Dの初期化
			
		IDirect3D9*		pD3D9 = NULL;		// Direct3Dデバイス生成用オブジェクト
		IDirect3DDevice9*	pDevice3D = NULL;	// Direct3Dのデバイス
			
		// Direct3D9オブジェクトの作成	
		pD3D9 = Direct3DCreate9(D3D_SDK_VERSION);	
		// ディスプレイ情報取得
		D3DDISPLAYMODE Display;
		pD3D9-&gt;GetAdapterDisplayMode( D3DADAPTER_DEFAULT, &amp;Display);
			
		D3DPRESENT_PARAMETERS	D3DParam = {			// スワップチェイン設定
			WINDOW_WIDTH,WINDOW_HEIGHT,Display.Format,1,D3DMULTISAMPLE_NONE,0,
			D3DSWAPEFFECT_DISCARD,hWnd,TRUE,TRUE,D3DFMT_D24S8,0,0,D3DPRESENT_INTERVAL_DEFAULT
		};			
		// HALモードで3Dデバイス作成
		if (FAILED(pD3D9-&gt;CreateDevice(D3DADAPTER_DEFAULT,D3DDEVTYPE_HAL, D3DParam.hDeviceWindow,
			D3DCREATE_HARDWARE_VERTEXPROCESSING | D3DCREATE_MULTITHREADED, &amp;D3DParam, &amp;pDevice3D)))
		if (FAILED(pD3D9-&gt;CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, D3DParam.hDeviceWindow,
			D3DCREATE_MIXED_VERTEXPROCESSING | D3DCREATE_MULTITHREADED, &amp;D3DParam, &amp;pDevice3D)))
		// REFモードで3Dデバイス作成
		if (FAILED(pD3D9-&gt;CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_REF, D3DParam.hDeviceWindow, 
			D3DCREATE_HARDWARE_VERTEXPROCESSING | D3DCREATE_MULTITHREADED, &amp;D3DParam, &amp;pDevice3D)))
		if (FAILED(pD3D9-&gt;CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_REF, D3DParam.hDeviceWindow, 
			D3DCREATE_SOFTWARE_VERTEXPROCESSING | D3DCREATE_MULTITHREADED, &amp;D3DParam, &amp;pDevice3D)))
		{
			// 3Dデバイス作成失敗
			pD3D9-&gt;Release();
			return -1;
		}
			
		// メッセージループ
		MSG msg = {}; 
		while(msg.message != WM_QUIT) {
			// アプリケーションに送られてくるメッセージをメッセージキューから取得する
			if(PeekMessage(&amp;msg, NULL, 0, 0, PM_REMOVE)){
				DispatchMessage(&amp;msg);	// アプリケーションの各ウィンドウプロシージャにメッセージを転送する
			}
			// メッセージ処理をしていないとき
			else{
			//（ここにDirectXの処理を書く）
			
				// 描画開始
				if(SUCCEEDED(pDevice3D-&gt;BeginScene()))
				{
					DWORD ClearColor = 0xff808080;	// 背景クリア色
					// 背景クリア
					pDevice3D-&gt;Clear( 0, NULL, D3DCLEAR_TARGET | D3DCLEAR_STENCIL | D3DCLEAR_ZBUFFER, ClearColor, 1.0f, 0 );
				
					// 描画終了
					pDevice3D-&gt;EndScene();
				}
				// 描画反映
				pDevice3D-&gt;Present( NULL, NULL, NULL, NULL );
				}
			}
			// DirectXの変数は必ず後処理をすること
			pDevice3D-&gt;Release();
			pD3D9-&gt;Release();	
			return 0;
		}
		</pre>
		</div>
		<p>
			<br>
			&emsp;エラーなく実行できていれば設定はちゃんとできています。エラーが出た場合は何かしらでミスっています。<br>
			<br>
			<br>
			&emsp;以上で今回の説明は以上となります。<br>
			<br><br><br><br>
			<font color="red">※補足１</font><br>
			&emsp;めんどくさいことをさせてしまった結果、困ったことに陥れやすい可能性があると思うので補足をします。<br>
			<br>
			<img src="25.jpg" alt="例えばd3d9.hの設定"><br>
			<br>
			例えば、「d3d9.h」をインクルードさせようとすると上の画像のように二つ出てしまうと思います。理由としてはWindows KitとDirectX SDKを設定したためです。
			ですが、Windows KitのほうではDirectX9を標準搭載していません。なので上のように二つ出てしまった場合はそれがどっちの「d3d9.h」なのかを確認してから
			インクルードしてください。それで上記のサイトで学ぶためDirectX9を扱う場合は「DirectX SDK」のほうでインクルードさせてください。お兄さんとの約束だぞ。<br>
			<br><br>
			<font color="red">※補足２</font><br>
			&emsp;確か「No.3 プロジェクトの設定」でのちに説明するといった話があったと思います。それを説明および補足します。<br>
			<br>
			&emsp;まずDirectX SDKについて説明します。<br>
			&emsp;みなさんに最初に導入させた「DirectX SDK」があると思いますが、あれはもう更新もされなければ扱っている人はほぼいません。
			それについてまず説明すると、DirectX SDKはWindows SDKに統合されました。それに伴ってDirectX SDKは本来必要ありません。<br>
			&emsp;ですが、みなさんに導入させた理由としては「DirectX9」を使って勉強してもらうためです。
			では、統合された「Windows SDK」のみで「DirectX9」が扱えるとまず疑問に思うはずですがそれにもお答えします。<br>
			&emsp;みなさんが使っているパソコンのOSはWindows10だと思います。単刀直入に言いますと、その「Windows10」ではDirectX9のゲーム及びソフトは起動できません。
			では、逆に起動してるのはなぜかと思いますが、それはDirectX9のためのランタイムライブラリを入れているパソコンだからです。標準では入っていないのが現状です。
			実際、ゲーム会社に送ったゲームがDirectX9で作られていたため起動できずひと手間必要となり減点された例があると聞きます。<br>
			&emsp;ここまででわかると思いますが、そんな環境の中で「Windows SDK」にはDirectX9で開発するためのものは入っていません。ただそれだと補足１が嘘をついてるとなるので細かく言うと
			DirectX9をサポートするものはWindows SDKに入っています。ただそれだけで完璧に作れません。加えて言うとWindows Vistaが終わっている今、DirectX10もそのうち消えます。<br>
			&emsp;じゃあ！なんでDirectX9をやらせんだよ！！って思うと思いますが補足４で説明します。<br>
			<br><br>
			<font color="red">※補足３</font><br>
			&emsp;次にWindows SDKについて説明します。<br>
			&emsp;これを導入する際にみなさんにディレクトリを確認させてバージョンを見てもらいました。<br>
			&emsp;Windows Kitはみなさんのパソコンに何かしらのバージョンが入っていたと思います。<br>
			なぜ入ってたかと申し上げるとVisual Studioを導入した際にWindows Kitが入れられています。C/C++に関する項目を入れた際に入れられているはずです。<br>
			ですがバージョンが低い可能性もあったので上の項目でWindows SDKの導入をさせました。<br>
			&emsp;それでWindows SDKを入れさせてバージョンを最新にさせた理由ですが、個々人でDirectXの11/12を勉強する際にすぐとっかかれるようにと配慮しました。
			つまり今回DirectX9を勉強してそれで終わりでいい人にとっては不必要なことをさせました。<br>
			<br><br>
			<font color="red">※補足４</font><br>
			&emsp;先に指定したページではDirectX9を使った2Dのゲームを作ってもらいます。<br>
			<br>
			&emsp;加えて今回使うDirectXはDirectX9です。2017年現在ではDirectX11が市場で出ています。開発としてはDirectX12を扱える状態です。<br>
			ですが、初めてDirectXを使う人にとってはDirectX9以降だと困惑することや初期化の内容がDirectX9を学ぶより多いのでDirectX9で行ってもらいます。<br>
			これを完璧にしたらDirectXに強くなります。完璧というのはやってる処理の内容を全部把握して関数や構造体の意味を理解するという意味です。いや、もっとそれ以上かもしれないですが。<br>
			<br><br>
			あと本当に補足すると指定したサイトが一番DirectXを始めて勉強するのに適していると感じたからです。私もDirectXはそこ出身です。<br><br>
			<br><br>
			ただここまで説明しても納得いかず独自で勉強しようと思う人がいるかもしれませんが別にそれでもかまいません。特にお助けできませんが。<br>
			いや、でも実際いろいろな場でDirectXを勉強することに関してバージョンのことで討論はよくなされています。DX9から始めるのかDX11から始めるのかなど。
			なので一概には言えないのが現状です。ただ、私はDX9から勉強始めるのを強く勧めます。<br>
			<br><br><br><br>
		</p>
	</BODY>
</HTML>